<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReviewIndex Admin - Create SEO Posts</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --success: #10b981;
            --danger: #ef4444;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-600: #4b5563;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .admin-header {
            background: var(--gray-900);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: between;
            align-items: center;
        }
        
        .admin-main {
            display: grid;
            grid-template-columns: 300px 1fr;
            min-height: 600px;
        }
        
        .sidebar {
            background: var(--gray-100);
            padding: 30px;
            border-right: 1px solid var(--gray-200);
        }
        
        .content {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--gray-800);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .nav-item {
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .nav-item.active {
            background: var(--primary);
            color: white;
        }
        
        .nav-item:hover:not(.active) {
            background: var(--gray-200);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .alert {
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        
        .alert-error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--gray-100);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .hidden {
            display: none;
        }
        
        .preview-section {
            background: var(--gray-100);
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            border-left: 4px solid var(--primary);
        }
        
        .char-count {
            font-size: 12px;
            color: var(--gray-600);
            text-align: right;
            margin-top: 4px;
        }
        
        .char-count.warning {
            color: var(--danger);
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <h2 style="text-align: center; margin-bottom: 30px;">üîê ReviewIndex Admin</h2>
        <form id="loginForm" class="login-form">
            <div class="form-group">
                <label for="password">Admin Password:</label>
                <input type="password" id="password" required placeholder="Enter admin password">
            </div>
            <button type="submit" class="btn btn-primary">Login</button>
        </form>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="admin-container hidden">
        <header class="admin-header">
            <h1>üìù ReviewIndex Admin Panel</h1>
            <button id="logoutBtn" class="btn btn-danger">Logout</button>
        </header>
        
        <div class="admin-main">
            <nav class="sidebar">
                <div class="nav-item active" data-tab="create-post">‚úèÔ∏è Create New Post</div>
                <div class="nav-item" data-tab="dashboard">üìä Dashboard</div>
                <div class="nav-item" data-tab="published-posts">üìÑ Published Posts</div>
                <div class="nav-item" data-tab="settings">‚öôÔ∏è Settings</div>
            </nav>
            
            <main class="content">
                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content">
                    <h2>Dashboard Overview</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalPosts">0</div>
                            <div>Total Posts</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="todayPosts">0</div>
                            <div>Posts Today</div>
                        </div>
                    </div>
                </div>

                <!-- Create Post Tab -->
                <div id="create-post" class="tab-content active">
                    <h2>Create SEO-Optimized Review</h2>
                    <form id="postForm">
                        <div class="alert" id="formAlert"></div>
                        
                        <div class="form-group">
                            <label for="title">Review Title *</label>
                            <input type="text" id="title" required placeholder="Best Product Name 2024 - Honest Review">
                            <div class="char-count" id="titleCount">0/60</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="description">Meta Description *</label>
                            <textarea id="description" required placeholder="Comprehensive review of Product Name covering features, performance, and value proposition..."></textarea>
                            <div class="char-count" id="descCount">0/160</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="filename">URL Slug *</label>
                            <input type="text" id="filename" required placeholder="best-product-name-2024">
                            <div class="char-count">Letters, numbers, and hyphens only</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="image">Featured Image URL</label>
                            <input type="url" id="image" placeholder="https://example.com/image.jpg">
                        </div>
                        
                        <div class="form-group">
                            <label for="rating">Rating (1-5)</label>
                            <select id="rating">
                                <option value="5">5 ‚≠ê - Excellent</option>
                                <option value="4" selected>4 ‚≠ê - Very Good</option>
                                <option value="3">3 ‚≠ê - Good</option>
                                <option value="2">2 ‚≠ê - Fair</option>
                                <option value="1">1 ‚≠ê - Poor</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="categories">Categories (comma-separated)</label>
                            <input type="text" id="categories" value="reviews,electronics" placeholder="reviews,electronics,gadgets">
                        </div>
                        
                        <div class="form-group">
                            <label for="affiliateLink">Affiliate Link</label>
                            <input type="url" id="affiliateLink" placeholder="https://amazon.com/dp/PRODUCTID">
                        </div>
                        
                        <div class="form-group">
                            <label for="youtubeLink">YouTube Video ID</label>
                            <input type="text" id="youtubeLink" placeholder="dQw4w9WgXcQ">
                        </div>
                        
                        <div class="form-group">
                            <label for="content">Review Content *</label>
                            <textarea id="content" required placeholder="Start writing your comprehensive review here... Use markdown for formatting." rows="10"></textarea>
                        </div>

                        <!-- NEW FIELDS ADDED HERE -->
                        <div class="form-group">
                            <label for="keyFeatures">Key Features & Specifications (one per line)</label>
                            <textarea id="keyFeatures" placeholder="Feature 1: Description
Feature 2: Description
Specification: Value"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="finalVerdict">Final Verdict & Recommendation *</label>
                            <textarea id="finalVerdict" required placeholder="Your comprehensive final verdict and recommendation... This will appear in the Final Rating section." rows="4"></textarea>
                        </div>
                        <!-- END NEW FIELDS -->
                        
                        <div class="form-group">
                            <label for="pros">Pros (one per line)</label>
                            <textarea id="pros" placeholder="Great performance
Excellent build quality
Good value for money"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="cons">Cons (one per line)</label>
                            <textarea id="cons" placeholder="Battery life could be better
Slightly expensive"></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-primary" id="submitBtn">üöÄ Publish SEO Review</button>
                        <button type="button" class="btn" id="previewBtn">üëÅÔ∏è Preview</button>
                    </form>

                    <!-- Preview Section -->
                    <div id="previewSection" class="preview-section hidden">
                        <h3>Preview</h3>
                        <div id="previewContent"></div>
                    </div>
                </div>

                <!-- Published Posts Tab -->
                <div id="published-posts" class="tab-content">
                    <h2>Published Posts</h2>
                    <div id="postsList"></div>
                </div>

                <!-- Settings Tab -->
                <div id="settings" class="tab-content">
                    <h2>Settings</h2>
                    <div class="form-group">
                        <label for="apiEndpoint">API Endpoint</label>
                        <input type="text" id="apiEndpoint" value="/api/create-post">
                    </div>
                    <button class="btn btn-primary" id="saveSettings">Save Settings</button>
                </div>
            </main>
        </div>
    </div>

    <script>
        // Configuration
        const ADMIN_PASSWORD = '2006$$';
        const API_ENDPOINT = '/api/create-post';

        // DOM Elements
        const loginScreen = document.getElementById('loginScreen');
        const adminDashboard = document.getElementById('adminDashboard');
        const loginForm = document.getElementById('loginForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const postForm = document.getElementById('postForm');
        const formAlert = document.getElementById('formAlert');
        const previewSection = document.getElementById('previewSection');
        const previewContent = document.getElementById('previewContent');
        const previewBtn = document.getElementById('previewBtn');
        const submitBtn = document.getElementById('submitBtn');

        // Character counters
        const titleInput = document.getElementById('title');
        const descInput = document.getElementById('description');
        const titleCount = document.getElementById('titleCount');
        const descCount = document.getElementById('descCount');

        // Authentication
        function checkAuth() {
            return localStorage.getItem('adminAuthenticated') === 'true';
        }

        function login() {
            localStorage.setItem('adminAuthenticated', 'true');
            loginScreen.classList.add('hidden');
            adminDashboard.classList.remove('hidden');
            loadDashboard();
        }

        function logout() {
            localStorage.removeItem('adminAuthenticated');
            adminDashboard.classList.add('hidden');
            loginScreen.classList.remove('hidden');
            postForm.reset();
        }

        // Tab Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                // Remove active class from all items
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                // Hide all tab content
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                
                // Activate current item
                this.classList.add('active');
                // Show corresponding tab content
                const tabId = this.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Character counting
        titleInput.addEventListener('input', function() {
            const count = this.value.length;
            titleCount.textContent = `${count}/60`;
            titleCount.classList.toggle('warning', count > 60);
        });

        descInput.addEventListener('input', function() {
            const count = this.value.length;
            descCount.textContent = `${count}/160`;
            descCount.classList.toggle('warning', count > 160);
        });

        // Form submission
        postForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                title: document.getElementById('title').value,
                description: document.getElementById('description').value,
                content: document.getElementById('content').value,
                image: document.getElementById('image').value,
                filename: document.getElementById('filename').value,
                rating: document.getElementById('rating').value,
                affiliateLink: document.getElementById('affiliateLink').value,
                youtubeLink: document.getElementById('youtubeLink').value,
                keyFeatures: document.getElementById('keyFeatures').value, // NEW FIELD
                finalVerdict: document.getElementById('finalVerdict').value, // NEW FIELD
                pros: document.getElementById('pros').value,
                cons: document.getElementById('cons').value,
                categories: document.getElementById('categories').value
            };

            // Validate filename
            if (!formData.filename.match(/^[a-z0-9-]+$/i)) {
                showAlert('Filename can only contain letters, numbers, and hyphens.', 'error');
                return;
            }

            try {
                submitBtn.disabled = true;
                submitBtn.textContent = 'Publishing...';

                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();

                if (result.success) {
                    showAlert('‚úÖ Review published successfully!', 'success');
                    postForm.reset();
                    loadDashboard(); // Refresh stats
                } else {
                    showAlert('‚ùå ' + result.message, 'error');
                }
            } catch (error) {
                showAlert('‚ùå Network error: ' + error.message, 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'üöÄ Publish SEO Review';
            }
        });

        // Preview functionality
        previewBtn.addEventListener('click', function() {
            const formData = {
                title: document.getElementById('title').value || 'Sample Review Title',
                description: document.getElementById('description').value || 'Sample description',
                content: document.getElementById('content').value || 'Sample content...',
                image: document.getElementById('image').value,
                rating: document.getElementById('rating').value,
                affiliateLink: document.getElementById('affiliateLink').value,
                youtubeLink: document.getElementById('youtubeLink').value,
                keyFeatures: document.getElementById('keyFeatures').value, // NEW FIELD
                finalVerdict: document.getElementById('finalVerdict').value, // NEW FIELD
                pros: document.getElementById('pros').value,
                cons: document.getElementById('cons').value
            };

            previewContent.innerHTML = generatePreview(formData);
            previewSection.classList.remove('hidden');
        });

        function generatePreview(data) {
            return `
                <h3>${data.title}</h3>
                <p><em>${data.description}</em></p>
                ${data.image ? `<img src="${data.image}" style="max-width: 100%; height: auto;" alt="${data.title}">` : ''}
                <div class="rating">Rating: ${'‚≠ê'.repeat(data.rating)}</div>
                <hr>
                <div>${data.content.replace(/\n/g, '<br>')}</div>
                ${data.keyFeatures ? `<h4>Key Features:</h4><ul>${data.keyFeatures.split('\n').map(f => `<li>${f}</li>`).join('')}</ul>` : ''}
                ${data.pros ? `<h4>Pros:</h4><ul>${data.pros.split('\n').map(p => `<li>${p}</li>`).join('')}</ul>` : ''}
                ${data.cons ? `<h4>Cons:</h4><ul>${data.cons.split('\n').map(c => `<li>${c}</li>`).join('')}</ul>` : ''}
                ${data.finalVerdict ? `<h4>Final Verdict:</h4><p>${data.finalVerdict.replace(/\n/g, '<br>')}</p>` : ''}
            `;
        }

        function showAlert(message, type) {
            formAlert.textContent = message;
            formAlert.className = 'alert';
            formAlert.classList.add(type === 'success' ? 'alert-success' : 'alert-error');
            formAlert.style.display = 'block';
            
            setTimeout(() => {
                formAlert.style.display = 'none';
            }, 5000);
        }

        async function loadDashboard() {
            // Here you could load actual stats from your API
            document.getElementById('totalPosts').textContent = '12';
            document.getElementById('todayPosts').textContent = '1';
        }

        // Login form handler
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('password').value;
            
            if (password === ADMIN_PASSWORD) {
                login();
            } else {
                alert('‚ùå Invalid password!');
            }
        });

        // Logout handler
        logoutBtn.addEventListener('click', logout);

        // Auto-login if already authenticated
        if (checkAuth()) {
            login();
        }

        // Auto-generate filename from title
        titleInput.addEventListener('blur', function() {
            const filenameInput = document.getElementById('filename');
            if (!filenameInput.value) {
                const slug = this.value
                    .toLowerCase()
                    .replace(/[^a-z0-9 -]/g, '')
                    .replace(/\s+/g, '-')
                    .replace(/-+/g, '-')
                    .substring(0, 50);
                filenameInput.value = slug;
            }
        });
    </script>
</body>
</html>